{% extends "base.html" %}
{% block nav_browse %}active{% endblock %}

{% block sidebar %}
<div class="sidebar-section">
  <div class="sidebar-heading">Category info</div>
  <div style="font-size: 0.82rem; color: var(--color-text-muted); padding: 0 4px;">
    <div>{{ traces|length }} trace{{ 's' if traces|length != 1 }} in this category</div>
  </div>
</div>
<div class="sidebar-section">
  <div class="sidebar-heading">Navigation</div>
  <ul class="sidebar-list">
    <li><a href="/">All traces</a></li>
    <li><a href="/about/">About</a></li>
  </ul>
</div>
{% endblock %}

{% block head %}
<style>
.category-header {
  margin-bottom: 1rem;
}

.category-header p {
  font-size: 0.9rem;
  color: var(--color-text-muted);
}

.trace-list {
  margin: 0;
  padding: 0;
  list-style: none;
}

.trace-item {
  padding: 0.5rem 0;
  border-bottom: 1px solid var(--color-border-faint);
}

.trace-item:last-child { border-bottom: none; }

.trace-item-title {
  font-size: 0.95rem;
  font-weight: 600;
  color: var(--color-link);
  text-decoration: none;
}

.trace-item-title:visited { color: var(--color-link-visited); }
.trace-item-title:hover { text-decoration: underline; }

.trace-item-excerpt {
  font-size: 0.85rem;
  color: var(--color-text-muted);
  margin: 0.15rem 0;
  line-height: 1.5;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.trace-item-tags {
  margin-top: 0.2rem;
}

.trace-item-tags a {
  font-size: 0.8rem;
  color: var(--color-text-light);
  text-decoration: none;
}

.trace-item-tags a:visited { color: var(--color-text-light); }
.trace-item-tags a:hover { color: var(--color-link); text-decoration: underline; }
.trace-item-tags .sep { color: var(--color-border); font-size: 0.75rem; }
</style>
{% endblock %}

{% block content %}
<div class="breadcrumb" style="font-size: 0.82rem; color: var(--color-text-light); margin-bottom: 0.5rem;">
  <a href="/">CommonTrace</a>
  <span style="margin: 0 0.25rem; color: var(--color-border);">&rsaquo;</span>
  Categories
</div>

<h1>Category: {{ tag }}</h1>

<div class="category-header">
  <p>
    This category contains <strong>{{ traces|length }}</strong> trace{{ 's' if traces|length != 1 }}
    related to <em>{{ tag }}</em>.
  </p>
</div>

<div class="trace-list">
  {% for trace in traces %}
  <article class="trace-item">
    <a href="/trace/{{ trace.slug }}/" class="trace-item-title">{{ trace.title }}</a>
    <p class="trace-item-excerpt">{{ trace.context[:180] }}{% if trace.context|length > 180 %}...{% endif %}</p>
    <div class="trace-item-tags">
      {% for t in trace.tags %}{% if not loop.first %}<span class="sep"> Â· </span>{% endif %}<a href="/tag/{{ t }}/">{{ t }}</a>{% endfor %}
    </div>
  </article>
  {% endfor %}
</div>
{% endblock %}
