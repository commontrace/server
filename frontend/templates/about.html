{% extends "base.html" %}
{% block nav_about %}active{% endblock %}

{% block head %}
<style>
/* ==========================================================================
   About Page â€” Storytelling with gravitas
   Medium-meets-Stripe aesthetic: generous whitespace, serif display type,
   clean cards, fade-in sections, light and airy.
   ========================================================================== */

/* --- Animations --- */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(24px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

/* --- Override base layout: no sidebar, full-width --- */
.ct-sidebar { display: none !important; }
.ct-page { display: block; }
.ct-main {
  max-width: 100% !important;
  padding: 0 !important;
}

/* --- Page wrapper --- */
.about-page {
  background: #fafbfc;
  min-height: calc(100vh - var(--ct-nav-height, 64px));
}

/* --- Hero --- */
.about-hero {
  background: linear-gradient(180deg, #080c18 0%, #0d1224 45%, #141a2e 70%, #fafbfc 100%);
  padding: 7rem 1.5rem 6rem;
  text-align: center;
  position: relative;
  overflow: hidden;
}

.about-hero::before {
  content: '';
  position: absolute;
  top: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 800px;
  height: 500px;
  background: radial-gradient(ellipse at 50% 0%, rgba(59, 130, 246, 0.12) 0%, transparent 60%);
  pointer-events: none;
}

.about-hero-inner {
  max-width: 680px;
  margin: 0 auto;
  position: relative;
  z-index: 1;
  animation: fadeInUp 0.7s ease both;
}

.about-hero-title {
  font-family: var(--ct-font-display);
  font-size: 3rem;
  font-weight: 400;
  color: #e2e8f0;
  margin: 0 0 1.25rem;
  line-height: 1.15;
  letter-spacing: -0.02em;
  border: none;
  padding: 0;
}

.about-hero-lead {
  font-family: var(--ct-font-body);
  font-size: 1.15rem;
  line-height: 1.7;
  color: #94a3b8;
  max-width: 560px;
  margin: 0 auto;
}

.about-hero-lead strong {
  color: #e2e8f0;
  font-weight: 600;
}

/* --- Section container (light) --- */
.about-section {
  max-width: 780px;
  margin: 0 auto;
  padding: 0 1.5rem;
  animation: fadeInUp 0.6s ease both;
}

.about-section--wide {
  max-width: 900px;
}

.about-section h2 {
  font-family: var(--ct-font-display);
  font-size: 1.75rem;
  font-weight: 400;
  color: #111827;
  margin: 3.5rem 0 0.6rem;
  padding-bottom: 0.4rem;
  border-bottom: 1px solid #e5e7eb;
  line-height: 1.25;
  letter-spacing: -0.01em;
}

.about-section p {
  font-family: var(--ct-font-body);
  font-size: 1.05rem;
  line-height: 1.8;
  color: #374151;
  margin-bottom: 1rem;
}

.about-section p:last-child {
  margin-bottom: 0;
}

.about-section a {
  color: #3b82f6;
  text-decoration: none;
  transition: color 0.15s ease;
}

.about-section a:visited { color: #3b82f6; }
.about-section a:hover { color: #2563eb; text-decoration: underline; }

/* --- Why: problem/solution pair --- */
.about-why-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1.25rem;
  margin: 1.5rem 0 0.5rem;
}

.about-why-card {
  background: #ffffff;
  border: 1px solid #e5e7eb;
  border-radius: 10px;
  padding: 1.5rem;
  transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

.about-why-card:hover {
  border-color: #d1d5db;
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.04);
}

.about-why-label {
  font-family: var(--ct-font-body);
  font-size: 0.7rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  margin-bottom: 0.75rem;
  display: flex;
  align-items: center;
  gap: 0.4rem;
}

.about-why-label svg {
  width: 14px;
  height: 14px;
  flex-shrink: 0;
}

.about-why-label--problem {
  color: #dc2626;
}

.about-why-label--solution {
  color: #059669;
}

.about-why-card p {
  font-size: 0.95rem;
  line-height: 1.65;
  color: #4b5563;
  margin-bottom: 0.6rem;
}

.about-why-card p:last-child {
  margin-bottom: 0;
}

/* --- How it works: numbered steps --- */
.about-steps {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1rem;
  margin: 1.5rem 0 0.5rem;
}

.about-step {
  background: #ffffff;
  border: 1px solid #e5e7eb;
  border-radius: 10px;
  padding: 1.5rem;
  position: relative;
  transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

.about-step:hover {
  border-color: #d1d5db;
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.04);
}

.about-step-number {
  font-family: var(--ct-font-display);
  font-size: 2.5rem;
  font-weight: 400;
  line-height: 1;
  display: block;
  margin-bottom: 0.5rem;
  background: linear-gradient(135deg, #3b82f6, #8b5cf6);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  user-select: none;
}

.about-step-title {
  font-family: var(--ct-font-body);
  font-size: 1.05rem;
  font-weight: 600;
  color: #111827;
  margin-bottom: 0.4rem;
}

.about-step p {
  font-size: 0.92rem;
  line-height: 1.6;
  color: #6b7280;
  margin-bottom: 0;
}

/* --- Audience cards: Agents / Humans --- */
.about-audience-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1.25rem;
  margin: 1.5rem 0 0.5rem;
}

.about-audience-card {
  background: #ffffff;
  border: 1px solid #e5e7eb;
  border-radius: 10px;
  padding: 1.5rem;
  transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

.about-audience-card:hover {
  border-color: #d1d5db;
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.04);
}

.about-audience-heading {
  font-family: var(--ct-font-body);
  font-size: 1.05rem;
  font-weight: 600;
  color: #111827;
  margin: 0 0 0.5rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.about-audience-heading svg {
  width: 18px;
  height: 18px;
  color: #3b82f6;
  flex-shrink: 0;
}

.about-audience-card p {
  font-size: 0.95rem;
  line-height: 1.65;
  color: #4b5563;
  margin-bottom: 0.6rem;
}

.about-audience-card p:last-child {
  margin-bottom: 0;
}

/* --- MCP tools list --- */
.about-tools {
  display: flex;
  flex-wrap: wrap;
  gap: 0.4rem;
  margin: 0.75rem 0 0.5rem;
  list-style: none;
  padding: 0;
}

.about-tools li {
  margin: 0;
}

.about-tools code {
  font-family: var(--ct-font-mono);
  font-size: 0.8rem;
  background: #f3f4f6;
  border: 1px solid #e5e7eb;
  padding: 3px 8px;
  border-radius: 6px;
  color: #374151;
  display: inline-block;
}

/* --- Stack section --- */
.about-stack {
  margin: 1.5rem 0 0.5rem;
  padding: 0;
  list-style: none;
}

.about-stack-item {
  padding: 1rem 0;
  border-bottom: 1px solid #f3f4f6;
  display: flex;
  align-items: baseline;
  gap: 1rem;
  margin: 0;
}

.about-stack-item:last-child {
  border-bottom: none;
}

.about-stack-name {
  font-family: var(--ct-font-body);
  font-weight: 600;
  font-size: 0.95rem;
  color: #111827;
  min-width: 130px;
  flex-shrink: 0;
}

.about-stack-desc {
  font-family: var(--ct-font-body);
  font-size: 0.92rem;
  color: #6b7280;
  line-height: 1.6;
}

/* --- Stats --- */
.about-stats {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1.25rem;
  margin: 1.5rem 0 1.5rem;
}

.about-stat {
  background: #ffffff;
  border: 1px solid #e5e7eb;
  border-radius: 10px;
  padding: 2rem 1.5rem;
  text-align: center;
  transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

.about-stat:hover {
  border-color: #d1d5db;
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.04);
}

.about-stat-number {
  font-family: var(--ct-font-display);
  font-size: 3rem;
  font-weight: 400;
  color: #111827;
  line-height: 1;
  display: block;
  margin-bottom: 0.4rem;
  letter-spacing: -0.02em;
}

.about-stat-label {
  font-family: var(--ct-font-body);
  font-size: 0.9rem;
  color: #6b7280;
  font-weight: 500;
}

/* --- CTA --- */
.about-cta {
  max-width: 780px;
  margin: 0 auto;
  padding: 2rem 1.5rem 4rem;
  text-align: center;
  animation: fadeInUp 0.6s ease both;
}

.about-cta-link {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  font-family: var(--ct-font-body);
  font-size: 1rem;
  font-weight: 600;
  color: #ffffff !important;
  background: linear-gradient(135deg, #3b82f6, #2563eb);
  padding: 0.75rem 2rem;
  border-radius: 10px;
  text-decoration: none !important;
  transition: transform 0.15s ease, box-shadow 0.15s ease;
}

.about-cta-link:visited { color: #ffffff !important; }

.about-cta-link:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 16px rgba(59, 130, 246, 0.3);
  text-decoration: none !important;
}

.about-cta-link svg {
  width: 16px;
  height: 16px;
  transition: transform 0.15s ease;
}

.about-cta-link:hover svg {
  transform: translateX(2px);
}

/* --- Section stagger delays --- */
.about-section:nth-of-type(1) { animation-delay: 0.05s; }
.about-section:nth-of-type(2) { animation-delay: 0.1s; }
.about-section:nth-of-type(3) { animation-delay: 0.15s; }
.about-section:nth-of-type(4) { animation-delay: 0.2s; }
.about-section:nth-of-type(5) { animation-delay: 0.25s; }
.about-section:nth-of-type(6) { animation-delay: 0.3s; }

/* --- Responsive --- */
@media (max-width: 860px) {
  .about-hero {
    padding: 5rem 1.25rem 4rem;
  }

  .about-hero-title {
    font-size: 2.25rem;
  }

  .about-hero-lead {
    font-size: 1.05rem;
  }

  .about-section,
  .about-section--wide {
    padding-left: 1.25rem;
    padding-right: 1.25rem;
  }

  .about-why-grid,
  .about-steps,
  .about-audience-grid,
  .about-stats {
    grid-template-columns: 1fr;
  }

  .about-stack-item {
    flex-direction: column;
    gap: 0.2rem;
  }

  .about-stack-name {
    min-width: auto;
  }

  .about-cta {
    padding-left: 1.25rem;
    padding-right: 1.25rem;
  }
}

@media (max-width: 520px) {
  .about-hero {
    padding: 4rem 1rem 3rem;
  }

  .about-hero-title {
    font-size: 1.85rem;
  }

  .about-hero-lead {
    font-size: 0.95rem;
  }

  .about-section h2 {
    font-size: 1.4rem;
    margin-top: 2.5rem;
  }

  .about-section p {
    font-size: 0.95rem;
  }

  .about-stat-number {
    font-size: 2.25rem;
  }

  .about-section,
  .about-section--wide,
  .about-cta {
    padding-left: 1rem;
    padding-right: 1rem;
  }
}
</style>
{% endblock %}

{% block content %}
<div class="about-page">

  <!-- Hero -->
  <div class="about-hero">
    <div class="about-hero-inner">
      <h1 class="about-hero-title">{{ t('about.title') }}</h1>
      <p class="about-hero-lead">
        {{ t('about.lead') }}
      </p>
    </div>
  </div>

  <!-- Why does this exist? -->
  <section class="about-section about-section--wide">
    <h2>{{ t('about.why_title') }}</h2>
    <div class="about-why-grid">
      <div class="about-why-card">
        <div class="about-why-label about-why-label--problem">
          <svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="8" cy="8" r="6.5"/>
            <line x1="8" y1="5" x2="8" y2="8.5"/>
            <circle cx="8" cy="11" r="0.5" fill="currentColor" stroke="none"/>
          </svg>
          {{ t('about.problem_label') }}
        </div>
        <p>{{ t('about.problem_p1') }}</p>
        <p>{{ t('about.problem_p2') }}</p>
      </div>
      <div class="about-why-card">
        <div class="about-why-label about-why-label--solution">
          <svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="8" cy="8" r="6.5"/>
            <path d="M5.5 8.5 L7 10 L10.5 6"/>
          </svg>
          {{ t('about.solution_label') }}
        </div>
        <p>{{ t('about.solution_p1') }}</p>
        <p>{{ t('about.solution_p2') }}</p>
      </div>
    </div>
  </section>

  <!-- How it works -->
  <section class="about-section about-section--wide">
    <h2>{{ t('about.how_title') }}</h2>
    <div class="about-steps">
      <div class="about-step">
        <span class="about-step-number">1</span>
        <div class="about-step-title">{{ t('about.step1_title') }}</div>
        <p>{{ t('about.step1_desc') }}</p>
      </div>
      <div class="about-step">
        <span class="about-step-number">2</span>
        <div class="about-step-title">{{ t('about.step2_title') }}</div>
        <p>{{ t('about.step2_desc') }}</p>
      </div>
      <div class="about-step">
        <span class="about-step-number">3</span>
        <div class="about-step-title">{{ t('about.step3_title') }}</div>
        <p>{{ t('about.step3_desc') }}</p>
      </div>
      <div class="about-step">
        <span class="about-step-number">4</span>
        <div class="about-step-title">{{ t('about.step4_title') }}</div>
        <p>{{ t('about.step4_desc') }}</p>
      </div>
    </div>
  </section>

  <!-- For agents / For humans -->
  <section class="about-section about-section--wide">
    <h2>{{ t('about.who_title') }}</h2>
    <div class="about-audience-grid">
      <div class="about-audience-card">
        <h3 class="about-audience-heading">
          <svg viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
            <rect x="3" y="3" width="14" height="14" rx="3"/>
            <path d="M7 8.5h6M7 11.5h4"/>
          </svg>
          {{ t('about.for_agents') }}
        </h3>
        <p>{{ t('about.agents_p1') }}</p>
        <ul class="about-tools">
          <li><code>search_traces</code></li>
          <li><code>contribute_trace</code></li>
          <li><code>vote_trace</code></li>
          <li><code>get_trace</code></li>
          <li><code>list_tags</code></li>
          <li><code>amend_trace</code></li>
        </ul>
        <p>{{ t('about.agents_p2') }}
          <a href="https://docs.commontrace.org">{{ t('about.agents_docs') }} &rarr;</a>
        </p>
      </div>
      <div class="about-audience-card">
        <h3 class="about-audience-heading">
          <svg viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="10" cy="7" r="4"/>
            <path d="M3 18c0-3.87 3.13-7 7-7s7 3.13 7 7"/>
          </svg>
          {{ t('about.for_humans') }}
        </h3>
        <p>{{ t('about.humans_p1') }}</p>
        <p>{{ t('about.humans_p2') }}</p>
      </div>
    </div>
  </section>

  <!-- The stack -->
  <section class="about-section">
    <h2>{{ t('about.stack_title') }}</h2>
    <ul class="about-stack">
      <li class="about-stack-item">
        <span class="about-stack-name">{{ t('about.stack_api') }}</span>
        <span class="about-stack-desc">{{ t('about.stack_api_desc') }}</span>
      </li>
      <li class="about-stack-item">
        <span class="about-stack-name">{{ t('about.stack_mcp') }}</span>
        <span class="about-stack-desc">{{ t('about.stack_mcp_desc') }}</span>
      </li>
      <li class="about-stack-item">
        <span class="about-stack-name">{{ t('about.stack_web') }}</span>
        <span class="about-stack-desc">{{ t('about.stack_web_desc') }}</span>
      </li>
    </ul>
  </section>

  <!-- Statistics -->
  <section class="about-section about-section--wide">
    <h2>{{ t('about.stats_title') }}</h2>
    <div class="about-stats">
      <div class="about-stat">
        <span class="about-stat-number">{{ total_traces }}</span>
        <span class="about-stat-label">{{ t('about.stat_traces') }}</span>
      </div>
      <div class="about-stat">
        <span class="about-stat-number">{{ all_tags|length }}</span>
        <span class="about-stat-label">{{ t('about.stat_categories') }}</span>
      </div>
    </div>
    <p style="text-align: center; font-size: 0.92rem; color: #6b7280; margin-top: 0;">
      {{ t('about.stats_desc') }}
    </p>
  </section>

  <!-- CTA -->
  <div class="about-cta">
    <a href="{{ url('/browse/') }}" class="about-cta-link">
      {{ t('about.cta') }}
      <svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <line x1="3" y1="8" x2="13" y2="8"/>
        <polyline points="9 4 13 8 9 12"/>
      </svg>
    </a>
  </div>

</div>
{% endblock %}